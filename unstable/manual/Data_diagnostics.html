

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Data diagnostics &mdash; Horace  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Correcting for sample misalignment" href="Correcting_for_sample_misalignment.html" />
    <link rel="prev" title="2. Generating SQW files" href="Generating_SQW_files.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Horace
              <img src="../_static/150px-Quintus_Horatius_Flaccus.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Introduction and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../User_guide.html">User’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Horace_manual.html">Horace Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Planning_a_Horace_scan.html">1. Planning a Horace scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="Generating_SQW_files.html">2. Generating SQW files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Data diagnostics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-inspector">3.1. run_inspector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#split">3.2. split</a></li>
<li class="toctree-l3"><a class="reference internal" href="#join">3.3. join</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instrument-view-cut">3.4. Instrument view cut</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Correcting_for_sample_misalignment.html">4. Correcting for sample misalignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cutting_data_of_interest_from_SQW_files_and_objects.html">5. Cutting data of interest from SQW files and objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Special_sqw_information.html">6. Special <code class="docutils literal notranslate"><span class="pre">SQW</span></code> information from sqw objects and files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Save_and_load.html">7. Loading <code class="docutils literal notranslate"><span class="pre">sqw</span></code> and <code class="docutils literal notranslate"><span class="pre">dnd</span></code> objects to memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="Save_and_load.html#saving-sqw-objects-from-memory-and-creating-filebacked-objects">8. Saving sqw objects from memory and creating filebacked objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reshaping_etc.html">9. Other shape functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Symmetrising_etc.html">10. Symmetry Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Unary_operations.html">11. Unary operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Binary_operations.html">12. Binary operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plotting.html">13. Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="Simulation.html">14. Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Multifit.html">15. Multifit</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tobyfit.html">16. Tobyfit</a></li>
<li class="toctree-l2"><a class="reference internal" href="Parallel.html">17. Running Horace in Parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="Changing_Horace_settings.html">18. Changing Horace settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="List_of_functions.html">List of functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Input_file_formats.html">Input file formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Example_scripts.html">Example Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Citing.html">Citing Horace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Developers.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contributing.html">Contributing to Horace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../General_disclaimer.html">General disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Previous_versions.html">Previous Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Horace</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Horace_manual.html">Horace Manual</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3. </span>Data diagnostics</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/manual/Data_diagnostics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-diagnostics">
<h1><span class="section-number">3. </span>Data diagnostics<a class="headerlink" href="#data-diagnostics" title="Permalink to this heading"></a></h1>
<p>Horace contains various tools for diagnosing issues with the data. The foremost
of these is the <a class="reference internal" href="#run-inspector">run_inspector</a> tool.</p>
<p>If you wish to decompose an sqw object into the data from its constituent runs,
the <a class="reference internal" href="#split">split</a> routine outlined below can be used. If necessary after
manipulation, these data can then be recombined using the <a class="reference internal" href="#join">join</a> routine.</p>
<section id="run-inspector">
<h2><span class="section-number">3.1. </span>run_inspector<a class="headerlink" href="#run-inspector" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">run_inspector</span></code> routine may be used on 1d or 2d <code class="docutils literal notranslate"><span class="pre">sqw</span></code> objects to plot the
data from each individual run.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">run_inspector</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

<span class="n">run_inspector</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;ax&#39;</span><span class="p">,[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">370</span><span class="p">])</span>

<span class="n">run_inspector</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;ax&#39;</span><span class="p">,[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">370</span><span class="p">],</span><span class="s">&#39;col&#39;</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">'ax'</span></code> and <code class="docutils literal notranslate"><span class="pre">'col'</span></code> arguments allow you to specify the xy axes, and the
colour scale, of the resulting plots. If these options are not set then each
frame will be plotted with different (tight) axes and a different colour scale.</p>
<p>To toggle through the frames, there are several keyboard options:</p>
<ul class="simple">
<li><p>Enter (Return) - play/pause video (5 frames-per-second default).</p></li>
<li><p>Backspace - play/pause video a factor 5 slower.</p></li>
<li><p>Right/left arrow keys - advance/go back one frame.</p></li>
<li><p>Page down/page up - advance/go back 10 frames.</p></li>
<li><p>Home/end - go to first/last frame of video.</p></li>
</ul>
<p>Let us illustrate the information that may be obtained by means of an
example. First we generate a QE slice such as the one below</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/Fe_slice.jpg"><img alt="../_images/Fe_slice.jpg" src="../_images/Fe_slice.jpg" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Selected QE slice</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>We can now use <code class="docutils literal notranslate"><span class="pre">run_inspector</span></code> to plot a series of slices that come from a
single contributing dataset, shown below.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/Fe_slice_run_inspector_1.jpg"><img alt="../_images/Fe_slice_run_inspector_1.jpg" src="../_images/Fe_slice_run_inspector_1.jpg" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Frame 1 in run inspector</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../_images/Fe_slice_run_inspector_11.jpg"><img alt="../_images/Fe_slice_run_inspector_11.jpg" src="../_images/Fe_slice_run_inspector_11.jpg" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Frame 11 in run inspector</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../_images/Fe_slice_run_inspector_21.jpg"><img alt="../_images/Fe_slice_run_inspector_21.jpg" src="../_images/Fe_slice_run_inspector_21.jpg" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Frame 21 in run inspector</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="split">
<h2><span class="section-number">3.2. </span>split<a class="headerlink" href="#split" title="Permalink to this heading"></a></h2>
<p>Split an sqw object into an array of <code class="docutils literal notranslate"><span class="pre">sqw</span></code> objects, each containing data from a
single contributing run. So if your dataset comprises information from 100 runs,
the output will be a 100-by-1 array of <code class="docutils literal notranslate"><span class="pre">sqw</span></code> objects.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">wout</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">split</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
</pre></div>
</div>
<p>The inputs are:</p>
<p><code class="docutils literal notranslate"><span class="pre">w</span></code> - an <code class="docutils literal notranslate"><span class="pre">sqw</span></code> object.</p>
<p>The output is:</p>
<p><code class="docutils literal notranslate"><span class="pre">wout</span></code> - an array of <code class="docutils literal notranslate"><span class="pre">sqw</span></code> objects, each one made from a single <code class="docutils literal notranslate"><span class="pre">.spe</span></code> data file</p>
</section>
<section id="join">
<h2><span class="section-number">3.3. </span>join<a class="headerlink" href="#join" title="Permalink to this heading"></a></h2>
<p>Inverse of <code class="docutils literal notranslate"><span class="pre">split</span></code> - takes an array of <code class="docutils literal notranslate"><span class="pre">sqw</span></code> objects that have been created
using <code class="docutils literal notranslate"><span class="pre">split</span></code> and recombines them.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">wout</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">join</span><span class="p">(</span><span class="n">w</span><span class="p">[,</span><span class="w"> </span><span class="n">wi</span><span class="p">])</span>
</pre></div>
</div>
<p>The inputs are:</p>
<p><code class="docutils literal notranslate"><span class="pre">w</span></code> - an array of <code class="docutils literal notranslate"><span class="pre">sqw</span></code> objects, each one made from a single <code class="docutils literal notranslate"><span class="pre">.spe</span></code> data file</p>
<p><code class="docutils literal notranslate"><span class="pre">wi</span></code> <strong>[Optional]</strong> - the original pre-split <code class="docutils literal notranslate"><span class="pre">sqw</span></code> object (recommended).</p>
<p>The output is:</p>
<p><code class="docutils literal notranslate"><span class="pre">wout</span></code> - an <code class="docutils literal notranslate"><span class="pre">sqw</span></code> object formed of from the <code class="docutils literal notranslate"><span class="pre">w</span></code> input.</p>
</section>
<section id="instrument-view-cut">
<h2><span class="section-number">3.4. </span>Instrument view cut<a class="headerlink" href="#instrument-view-cut" title="Permalink to this heading"></a></h2>
<p>Normally Horace works with <span class="math notranslate nohighlight">\(S(\vec{Q},\omega)\)</span> scattering function build in reciprocal coordinate system related to a crystal. If sample is not sufficiently large to allow neutrons thermalization or instrument have various problems with its detectors or background scattering, some scattering artefacts may add noise or unrelated signals to measured  <span class="math notranslate nohighlight">\(S(\vec{Q},\omega)\)</span> function.
These artefacts will have spherical symmetry around the beam direction. To clearly identify such artefacts one may use
<code class="docutils literal notranslate"><span class="pre">instrument_view_cut</span></code> algorithm:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">wout</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">instrument_view_cut</span><span class="p">(</span><span class="n">sqw_source</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="n">theta_step</span><span class="p">,</span><span class="n">theta_max</span><span class="p">],[</span><span class="n">En_min</span><span class="p">,</span><span class="n">En_step</span><span class="p">,</span><span class="n">En_max</span><span class="p">]);</span>
</pre></div>
</div>
<p>Where <em>sqw_source</em> is an source <code class="docutils literal notranslate"><span class="pre">sqw</span></code> object with pixels, and two other arguments define binning in two directions. <code class="docutils literal notranslate"><span class="pre">theta</span></code> – the angle between beam and detector directions and <code class="docutils literal notranslate"><span class="pre">En</span></code> are the energy transfer values.
The algorithm makes the cut in the spherical coordinate system wich z-axis is aligned along the beam direction.
According to Horace agreement, beam in Horace is directed along <span class="math notranslate nohighlight">\(e_{x}\)</span> coordinate or direction <span class="math notranslate nohighlight">\(\vec{u}\)</span> of the crystal (see Chapter on <a class="reference internal" href="Generating_SQW_files.html#generating-sqw-files"><span class="std std-ref">Generating SQW files</span></a> for details):</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../_images/kf_sphere_coordinate_system.png"><img alt="../_images/kf_sphere_coordinate_system.png" src="../_images/kf_sphere_coordinate_system.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Spherical coordinate system aligned with the beam and used by <code class="docutils literal notranslate"><span class="pre">instrument_view_cut</span></code>.</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The algorithm processes whole <code class="docutils literal notranslate"><span class="pre">sqw</span></code> source so takes a while to complete. Picture below shows the result
of executing this algorithm on two old (2010) MAPS <cite>sqw</cite> files produced without diagnostics running over contributing <code class="docutils literal notranslate"><span class="pre">nxspe</span></code> files.
There are various instrument artefacts clearly observable on the images. The noisy ADC are not even identifiable by diagnostics.</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../_images/InstrumentView_issues.png"><img alt="../_images/InstrumentView_issues.png" src="../_images/InstrumentView_issues.png" style="width: 1200px;" /></a>
<figcaption>
<p><span class="caption-text">Various issues identified on instrument view.</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The best way of dealing with these kind of issues if they can not be clearly observable from a single run is to use Mantid
to add together all workspaces intended to use as Horace source data, display them on Mantid instrument view and create hard mask there.</p>
<p>There is another issue which can be identified by this algorithm usually while diagnosing old <code class="docutils literal notranslate"><span class="pre">sqw</span></code> data, as this issue have been hopefully fully fixed in Horace-4. You may notice, that cut applied over the whole sqw file range suddenly start loosing substantial fraction of pixels. For example, normal cut log for a cut applied over whole <code class="docutils literal notranslate"><span class="pre">sqw</span></code> file range will look like:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>*** Cutting file-backed sqw object; returning result in file –&gt; ignored as cut contains no pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 1 of 196; Read data for 20000000 pixels – processing data… —–&gt; included  20000000 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 2 of 196; Read data for 20000000 pixels – processing data… —–&gt; included  20000000 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 3 of 196; Read data for 20000000 pixels – processing data… —–&gt;  included  20000000 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 4 of 196; Read data for 20000000 pixels – processing data… —–&gt;  included  20000000 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 5 of 196; Read data for 20000000 pixels – processing data… —–&gt;  included  20000000 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 6 of 196; Read data for 20000000 pixels – processing data… —–&gt;  included  20000000 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 7 of 196; Read data for 20000000 pixels – processing data… —–&gt;  included  20000000 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 8 of 196; Read data for 20000000 pixels – processing data… —–&gt;  included  20000000 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 9 of 196; Read data for 20000000 pixels – processing data… —–&gt;  included  20000000 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>....</p></td>
</tr>
</tbody>
</table>
<p>Sometimes running cut on old Horace data, despite making <code class="docutils literal notranslate"><span class="pre">instrument_view_cut</span></code> over whole instrument ranges will produce log which look like:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>*** Cutting file-backed sqw object; returning result in file –&gt; ignored as cut contains no pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 1 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included   5162352 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 2 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included  10791836 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 3 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included   5338109 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 4 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included         0 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 5 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included         0 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 6 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included    191651 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 7 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included   7974898 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>*** Step 8 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included  12112223 pixels</p></td>
</tr>
<tr class="row-even"><td><p>*** Step 9 of 264; Read data for 20000000 pixels – processing data… —–&gt;  included   1943239 pixels</p></td>
</tr>
<tr class="row-odd"><td><p>....</p></td>
</tr>
</tbody>
</table>
<p>despite the cut is performed over whole instrument ranges. This indicates subtle issue in Horace <code class="docutils literal notranslate"><span class="pre">sqw</span></code> files,
where they lost synchronization between pixels information and information about crystal orientation.
To clarify this issue exactly, one may run <code class="docutils literal notranslate"><span class="pre">instrument_view_cut</span></code> with <code class="docutils literal notranslate"><span class="pre">-check_correspondence</span></code> option.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">wout</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">instrument_view_cut</span><span class="p">(</span><span class="n">source_sqw</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">140</span><span class="p">],[],</span><span class="s">&#39;-check_correspondence&#39;</span><span class="p">);</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">wout</span><span class="p">)</span>
</pre></div>
</div>
<p>This option force 2D cut in <span class="math notranslate nohighlight">\(|k_{f}|\)</span> - <span class="math notranslate nohighlight">\(dE\)</span> coordinates. As these values are connected by
arithmetic relationship, the cut in these coordinates should represent a line. If one see a 2-dimensional image instead,
the correspondence between pixel information describing neutron “pseudo-events” and experiment information describing
runs and crystal orientation is violated. The following figure represents two <code class="docutils literal notranslate"><span class="pre">sqw</span></code> datasets, where the first one
was build with correct correspondence between experiment and pixels information and the second one – where
this correspondence have been broken.</p>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../_images/InstrumetViewCut_kf_dE_coordinates.png"><img alt="../_images/InstrumetViewCut_kf_dE_coordinates.png" src="../_images/InstrumetViewCut_kf_dE_coordinates.png" style="width: 1200px;" /></a>
<figcaption>
<p><span class="caption-text">Correct – a) and broken – b) relationship between experiment information and pixels information.</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The dataset with broken pixel-experiment correspondence can be cut, sliced and multifitted, but Tobyfit would not
produce correct result on it. To use Tobyfit, one needs to rebuild such <code class="docutils literal notranslate"><span class="pre">sqw</span></code> dataser using Horace-4. If you do not
have original data to reproduce such <code class="docutils literal notranslate"><span class="pre">sqw</span></code> dataset and need to use Tobyfit, contact <a class="reference external" href="mailto:HoraceHelp&#37;&#52;&#48;stfc&#46;ac&#46;uk">HoraceHelp<span>&#64;</span>stfc<span>&#46;</span>ac<span>&#46;</span>uk</a>. The team should
be able to help you rebuilding such <code class="docutils literal notranslate"><span class="pre">sqw</span></code> dataset.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Generating_SQW_files.html" class="btn btn-neutral float-left" title="2. Generating SQW files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Correcting_for_sample_misalignment.html" class="btn btn-neutral float-right" title="4. Correcting for sample misalignment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2006-2025, STFC RAL.
      <span class="lastupdated">Last updated on Dec 3, 2025, 9:23:18 AM.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
<br><br>
<a href="https://github.com/pace-neutrons/Horace/edit/master/documentation/user_docs/docs/manual/Data_diagnostics.rst">Click here to edit</a> or <a href="https://github.com/pace-neutrons/Horace/edit/master/documentation/user_docs/docs/new_page.rst">Click here to add new page</a> (requires <a href="https://github.com/login">GitHub account</a>).
<br>
For more info on editing <a href="../Contributing.html">click here</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>