

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Input file formats &mdash; Horace  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FAQ" href="FAQ.html" />
    <link rel="prev" title="List of functions" href="List_of_functions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Horace
              <img src="../_static/150px-Quintus_Horatius_Flaccus.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Introduction and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../User_guide.html">User’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Horace_manual.html">Horace Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Planning_a_Horace_scan.html">1. Planning a Horace scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="Generating_SQW_files.html">2. Generating SQW files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Data_diagnostics.html">3. Data diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Correcting_for_sample_misalignment.html">4. Correcting for sample misalignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cutting_data_of_interest_from_SQW_files_and_objects.html">5. Cutting data of interest from SQW files and objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Special_sqw_information.html">6. Special <code class="docutils literal notranslate"><span class="pre">SQW</span></code> information from sqw objects and files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Save_and_load.html">7. Loading <code class="docutils literal notranslate"><span class="pre">sqw</span></code> and <code class="docutils literal notranslate"><span class="pre">dnd</span></code> objects to memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="Save_and_load.html#saving-sqw-objects-from-memory-and-creating-filebacked-objects">8. Saving sqw objects from memory and creating filebacked objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reshaping_etc.html">9. Other shape functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Symmetrising_etc.html">10. Symmetry Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Unary_operations.html">11. Unary operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Binary_operations.html">12. Binary operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plotting.html">13. Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="Simulation.html">14. Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Multifit.html">15. Multifit</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tobyfit.html">16. Tobyfit</a></li>
<li class="toctree-l2"><a class="reference internal" href="Parallel.html">17. Running Horace in Parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="Changing_Horace_settings.html">18. Changing Horace settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="List_of_functions.html">List of functions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Input file formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nxspe-file"><code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#gen-nxspe">gen_nxspe</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#spe-file-and-par-file"><code class="docutils literal notranslate"><span class="pre">.spe</span></code> file and <code class="docutils literal notranslate"><span class="pre">.par</span></code> file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spe-file-format"><code class="docutils literal notranslate"><span class="pre">.spe</span></code> file format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#par-file-format"><code class="docutils literal notranslate"><span class="pre">.par</span></code> file format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Example_scripts.html">Example Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Citing.html">Citing Horace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Developers.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contributing.html">Contributing to Horace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../General_disclaimer.html">General disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Previous_versions.html">Previous Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Horace</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Horace_manual.html">Horace Manual</a></li>
      <li class="breadcrumb-item active">Input file formats</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/manual/Input_file_formats.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="input-file-formats">
<h1>Input file formats<a class="headerlink" href="#input-file-formats" title="Permalink to this heading"></a></h1>
<p>To generate the <code class="docutils literal notranslate"><span class="pre">.sqw</span></code> file from which Horace reads <span class="math notranslate nohighlight">\(S(\mathbf{Q}, \omega{})\)</span>, neutron scattering
data for each individual run needs to be provided in one of two formats:</p>
<ul class="simple">
<li><p>the HDF5 (Hierarchical Data Format) <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> file.</p></li>
<li><p>the legacy ASCII format <code class="docutils literal notranslate"><span class="pre">.spe</span></code> file, together with an ASCII detector
parameter file (the <code class="docutils literal notranslate"><span class="pre">.par</span></code> file)</p></li>
</ul>
<p>Two functions are available as part of Horace to create <code class="docutils literal notranslate"><span class="pre">.sqw</span></code> files from
these input files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gen_sqw</span></code> (creates a new <code class="docutils literal notranslate"><span class="pre">.sqw</span></code> file)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">accumulate_sqw</span></code> (accumulates data to an existing <code class="docutils literal notranslate"><span class="pre">.sqw</span></code> file).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functions to generate <code class="docutils literal notranslate"><span class="pre">.sqw</span></code> files are described in detail <a class="reference internal" href="Generating_SQW_files.html#generating-sqw-files"><span class="std std-ref">here</span></a>.</p>
</div>
<p>Generally, if Horace has been made available for that instrument by the
scientist(s) responsible, the input data files (<code class="docutils literal notranslate"><span class="pre">.spe</span></code> or <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> format)
will be created by the data reduction code for the instrument you are
using. However, if you want to use Horace to analyse data from other instruments
you need to know how to create the input files from whatever format your data is
saved in.</p>
<section id="nxspe-file">
<h2><code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> file<a class="headerlink" href="#nxspe-file" title="Permalink to this heading"></a></h2>
<p>The recommended input data file for Horace is the <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> file, which holds both
the <span class="math notranslate nohighlight">\(S(\mathbf{Q}, \omega{})\)</span> data and errors for each detector, detector position and size
information, together with the crystal orientation angle <span class="math notranslate nohighlight">\(\psi\)</span> and the
incident neutron energy <span class="math notranslate nohighlight">\(E_i\)</span>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> file stores the information in a [NeXus format
file](<a class="reference external" href="http://www.nexusformat.org/">http://www.nexusformat.org/</a>), which is a common data exchange
format for neutron, X-ray and muon data that is built on top of the
HDF5 (Hierarchical Data Format) scientific data format.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Data files in the <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> format are produced by the <a class="reference external" href="http://www.mantidproject.org">Mantid data analysis
software</a>. They are directly produced by the
data reduction algorithms within Mantid for the direct geometry spectrometers
at both the ISIS spallation neutron source at the Rutherford Appleton
Laboratory in the UK and the SNS spallation neutron source at Oak Ridge
National Laboratory in the USA.</p>
<p>Mantid is an open source data manipulation and analysis framework for neutron
and muon data analysis. If Mantid is used to perform the data corrections for
a neutron spectrometer, then the Mantid algorithm <code class="docutils literal notranslate"><span class="pre">SaveNXSPE</span></code> can be used
to output <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> files. Full details of how to use Mantid and the
input/output for each algorithm are available at the <a class="reference external" href="http://www.mantidproject.org/">Mantid web site</a>.</p>
</div>
<section id="gen-nxspe">
<h3>gen_nxspe<a class="headerlink" href="#gen-nxspe" title="Permalink to this heading"></a></h3>
<p>More suitable for a ‘quick start’, is if you can read corrected scattering data,
associated estimated errors, and detector parameters into Matlab arrays. You can
then use the Horace utility function <code class="docutils literal notranslate"><span class="pre">gen_nxspe</span></code> to create <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> files.</p>
<p>This is a flexible method to repackage and save <span class="math notranslate nohighlight">\(S(\mathbf{Q}, \omega{})\)</span> and detector information to
file. To write a single <code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> file the syntax is as follows:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">gen_nxspe</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="n">ERR</span><span class="p">,</span><span class="n">en</span><span class="p">,</span><span class="n">par</span><span class="p">,</span><span class="n">nxspefile_name</span><span class="p">,</span><span class="n">efix</span><span class="p">,</span><span class="n">emode</span><span class="p">,</span><span class="nb">psi</span><span class="p">)</span>
</pre></div>
</div>
<p>The input parameters are defined as follows:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hereon, <code class="docutils literal notranslate"><span class="pre">ne</span></code> is the number of energy bins and <code class="docutils literal notranslate"><span class="pre">nd</span></code> is the number of detector
elements.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">S</span></code> - An <code class="docutils literal notranslate"><span class="pre">ne</span></code> x <code class="docutils literal notranslate"><span class="pre">nd</span></code> array of signal strength.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERR</span></code> - An <code class="docutils literal notranslate"><span class="pre">ne</span></code> x <code class="docutils literal notranslate"><span class="pre">nd</span></code> array of estimated standard errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">en</span></code> - An <code class="docutils literal notranslate"><span class="pre">ne+1</span></code> array of energy bin boundaries.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">par</span></code> - A <code class="docutils literal notranslate"><span class="pre">6</span></code> x <code class="docutils literal notranslate"><span class="pre">nd</span></code> array of detector parameters. Each column of the
array contains information for a detector element:</p></li>
</ul>
<blockquote id="det-info">
<div><ul class="simple">
<li><p>ind: Detector index number. The detectors can be numbered <code class="docutils literal notranslate"><span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">...,</span> <span class="pre">nd</span></code></p></li>
<li><p>L2: Distance (m) from the sample to detector.</p></li>
<li><p>phi: Scattering angle (degrees), i.e. angle between the incident beam
direction and a line connecting the sample to the detector.</p></li>
<li><p>azim: Azimuthal angle (degrees).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In spherical polar coordinates where the conventional z-axis
(<span class="math notranslate nohighlight">\(\vec{u}\)</span>) points along the direction of the incident beam and with the
conventional y-axis (<span class="math notranslate nohighlight">\(\vec{v}\)</span>) pointing vertically upwards:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">phi</span></code> is the conventional polar angle <span class="math notranslate nohighlight">\(\theta\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">azim</span></code> is the conventional azimuthal angle <span class="math notranslate nohighlight">\(\phi\)</span>.</p></li>
</ul>
</div>
<ul class="simple">
<li><p>width: Width (m) of the detector perpendicular to the Debye-Scherrer ring
through the detector.</p></li>
<li><p>length: Length (m) of the detector tangential to the Debye-Scherrer ring
through the detector.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The width and length of the detector are not actually used by Horace, but
dummy values need to be provided.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nxspefile_name</span></code> - The name of the file to which the data will be saved.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efix</span></code> - Fixed energy (meV). If emode=1 (direct geometry) this is the fixed
incident energy, if emode=2 (indirect geometry) it is the fixed final energy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">psi</span></code> Rotation about the vertical axis. This is the angle between the vector
<span class="math notranslate nohighlight">\(\vec{u}\)</span> of the pair of vectors <span class="math notranslate nohighlight">\(\vec{u}\)</span> and <span class="math notranslate nohighlight">\(\vec{v}\)</span> that
define the horizontal scattering plane of the crystal.</p></li>
</ul>
</section>
</section>
<section id="spe-file-and-par-file">
<h2><code class="docutils literal notranslate"><span class="pre">.spe</span></code> file and <code class="docutils literal notranslate"><span class="pre">.par</span></code> file<a class="headerlink" href="#spe-file-and-par-file" title="Permalink to this heading"></a></h2>
<p>These files may be encountered if you are using Horace to analyse older
data. The ASCII <code class="docutils literal notranslate"><span class="pre">.spe</span></code> format file stores S(w) and associated error bars as a
function of energy transfer and <span class="math notranslate nohighlight">\(\hbar{}W\)</span>, for each detector in turn.</p>
<p>In addition to the set of <code class="docutils literal notranslate"><span class="pre">.spe</span></code> files, Horace requires an accompanying ASCII
file which contains information about the location of the detectors in the
spectrometer’s reference frame, the <code class="docutils literal notranslate"><span class="pre">.par</span></code> file.</p>
<p>Although these ASCII format files have largely been superseded in favour of the
<code class="docutils literal notranslate"><span class="pre">.nxspe</span></code> format described above, these files are ubiquitous as the format in
which historic data is saved, and are recognised by several other neutron
visualisation and analysis programs.</p>
<p>Some programs can also write their own output as <code class="docutils literal notranslate"><span class="pre">.spe</span></code> files, and
consequently the <code class="docutils literal notranslate"><span class="pre">.spe</span></code> file is sometimes used as a transportable format data
file for time-of-flight neutron spectrometers.</p>
<p>The format of these two files is described here. However, it is not recommended
to create new <code class="docutils literal notranslate"><span class="pre">.spe</span></code> files as it is now an obsolete file format.</p>
<section id="spe-file-format">
<h3><code class="docutils literal notranslate"><span class="pre">.spe</span></code> file format<a class="headerlink" href="#spe-file-format" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">.spe</span></code> file contains the intensity and estimated standard deviation on those
intensities for each detector element in turn, with header blocks that give the
number of detectors and energy bins, and the scattering angle and energy
transfer bin boundaries. These blocks are all separated by character strings
that begin with ‘###’. In full:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">nd</span><span class="w"> </span><span class="s">ne</span>

###<span class="w"> </span><span class="n">Phi</span><span class="w"> </span><span class="n">Grid</span>

<span class="n">phi</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">    </span><span class="n">phi</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="n">phi</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="n">phi</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="n">phi</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="n">phi</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w">  </span><span class="n">phi</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">phi</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w">   </span><span class="n">phi</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="n">phi</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="p">:</span>
<span class="k">...</span><span class="c">    phi(nd+1)</span>

###<span class="w"> </span><span class="n">Energy</span><span class="w"> </span><span class="n">Grid</span>

<span class="n">en</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">en</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">    </span><span class="n">en</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="n">en</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="n">en</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="n">en</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="n">en</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w">  </span><span class="n">en</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">en</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="n">en</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w">   </span><span class="n">en</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">en</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="n">en</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="n">en</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="w"> </span><span class="n">en</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="n">en</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="p">:</span>
<span class="k">...</span><span class="c">   en(ne+1)</span>

###<span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="n">Phi</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>

<span class="n">S</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="n">S</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="n">S</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="n">S</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="n">S</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="n">S</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w">  </span><span class="n">S</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">S</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="p">:</span>
<span class="k">...</span><span class="c">  S(ne)</span>

###<span class="w"> </span><span class="n">Errors</span>

<span class="n">ERR</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">ERR</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w">  </span><span class="n">ERR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">ERR</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">ERR</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="n">ERR</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="n">ERR</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span><span class="w"> </span><span class="n">ERR</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="n">ERR</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="p">:</span>
<span class="k">...</span><span class="c">  ERR(ne)</span>

###<span class="w"> </span><span class="n">S</span><span class="p">(</span><span class="n">Phi</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
<span class="p">:</span>
###<span class="w"> </span><span class="n">Errors</span>
<span class="p">:</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">nd</span></code> is the number of detectors, <code class="docutils literal notranslate"><span class="pre">ne</span></code> is the number of energy bins,
<code class="docutils literal notranslate"><span class="pre">phi</span></code> contains scattering angles, <code class="docutils literal notranslate"><span class="pre">en</span></code> contains the energy transfer bin
boundaries, and <code class="docutils literal notranslate"><span class="pre">S</span></code> and <code class="docutils literal notranslate"><span class="pre">ERR</span></code> contain the signal and standard error on the
signal for each detecetor in turn.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The values in <code class="docutils literal notranslate"><span class="pre">phi</span></code> are conventionally ignored by neutron analysis
applications, including Horace, by default they are set to <code class="docutils literal notranslate"><span class="pre">1,</span> <span class="pre">2</span> <span class="pre">,3</span>
<span class="pre">...</span> <span class="pre">(nd+1)</span></code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On the first line, <code class="docutils literal notranslate"><span class="pre">nd</span></code> and <code class="docutils literal notranslate"><span class="pre">ne</span></code> need only to be separated by white
space.</p>
<p>In the blocks containing the signal and error the format is strongly
prescribed:</p>
<ul class="simple">
<li><p>each line must contain 8 real numbers, apart from the last line in each
block</p></li>
<li><p>each number must occupy a field of precisely 10 spaces.</p></li>
<li><p>There is not necessarily any whitespace between any two numbers
and they can run up against one another. (This is a frequent
source of problem when parsing/writing the files.)</p></li>
</ul>
<p><strong>N.B.</strong> This corresponds roughly with the format specifiers:</p>
<ul class="simple">
<li><p>Fortran: <code class="docutils literal notranslate"><span class="pre">8(F10.0)</span></code></p></li>
<li><p>C: <code class="docutils literal notranslate"><span class="pre">%f10%f10%f10%f10%f10%f10%f10%f10</span></code></p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is strongly recommended that you do not try to create your own
<code class="docutils literal notranslate"><span class="pre">.spe</span></code> format files. This is an obsolete format.</p>
</div>
</section>
<section id="par-file-format">
<h3><code class="docutils literal notranslate"><span class="pre">.par</span></code> file format<a class="headerlink" href="#par-file-format" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">.par</span></code> file contains the position information of the detectors and their
sizes. The format is:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>ndet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>L2(1)</p></td>
<td><p>phi(1)</p></td>
<td><p>azim(1)</p></td>
<td><p>width(1)</p></td>
<td><p>length(1)</p></td>
</tr>
<tr class="row-odd"><td><p>L2(2)</p></td>
<td><p>phi(2)</p></td>
<td><p>azim(2)</p></td>
<td><p>width(2)</p></td>
<td><p>length(2)</p></td>
</tr>
<tr class="row-even"><td><p>:</p></td>
<td><p>:</p></td>
<td><p>:</p></td>
<td><p>:</p></td>
<td><p>:</p></td>
</tr>
<tr class="row-odd"><td><p>L2(ndet)</p></td>
<td><p>phi(ndet)</p></td>
<td><p>azim(ndet)</p></td>
<td><p>width(ndet)</p></td>
<td><p>length(ndet)</p></td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#det-info">See here</a> for the meanings of these parameters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The parameters need to be separated by white space, but otherwise there are
no constraints on the format.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The width and length of the detector are not actually used by Horace, but
dummy values need to be present in the file.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="List_of_functions.html" class="btn btn-neutral float-left" title="List of functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="FAQ.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2006-2025, STFC RAL.
      <span class="lastupdated">Last updated on Mar 6, 2025, 11:37:47 AM.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
<br><br>
<a href="https://github.com/pace-neutrons/Horace/edit/master/documentation/user_docs/docs/manual/Input_file_formats.rst">Click here to edit</a> or <a href="https://github.com/pace-neutrons/Horace/edit/master/documentation/user_docs/docs/new_page.rst">Click here to add new page</a> (requires <a href="https://github.com/login">GitHub account</a>).
<br>
For more info on editing <a href="../Contributing.html">click here</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>